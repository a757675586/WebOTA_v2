<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CarLight Web - ËΩ¶ËΩΩÊ∞õÂõ¥ÁÅØÊéßÂà∂Á≥ªÁªü">
    <title>CarLight - Ê∞õÂõ¥ÁÅØÊéßÂà∂</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/ambient.css">
</head>

<body>
    <div class="ambient-app">
        <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
        <header class="ambient-navbar">
            <div class="brand">
                <span class="logo">üí°</span>
                <div class="brand-text">
                    <h1>CarLight</h1>
                </div>
            </div>
            <div class="nav-actions">
                <div class="status-badge" id="statusBadge">
                    <span class="status-dot"></span>
                    <span class="status-label" id="connectionStatus">Êú™ËøûÊé•</span>
                </div>>
                <button class="btn btn-primary" id="btnScan">
                    <span class="btn-icon">üîç</span>
                    Êâ´ÊèèËÆæÂ§á
                </button>
            </div>
        </header>

        <div class="ambient-container">
            <!-- Ê®°ÂºèÂàáÊç¢ Tabs -->
            <div class="mode-tabs" id="modeTabs">
                <button class="mode-tab active" data-mode="single">
                    <span class="mode-tab-icon">üé®</span>
                    <span>ÂçïËâ≤Ê®°Âºè</span>
                </button>
                <button class="mode-tab" data-mode="multi">
                    <span class="mode-tab-icon">üåà</span>
                    <span>Â§öËâ≤Ê®°Âºè</span>
                </button>
                <button class="mode-tab" data-mode="dynamic">
                    <span class="mode-tab-icon">üéµ</span>
                    <span>ÂæãÂä®Ê®°Âºè</span>
                </button>
            </div>

            <main class="ambient-main">
                <!-- Â∑¶‰æßËæπÊ†è -->
                <aside class="ambient-sidebar">
                    <!-- ËÆæÂ§áËøûÊé•Âç°Áâá -->
                    <div class="card card-glass">
                        <div class="card-header">
                            <div class="card-icon">üì°</div>
                            <h2>ËÆæÂ§áËøûÊé•</h2>
                        </div>
                        <div class="card-body">
                            <div class="device-card" id="deviceCard">
                                <div class="device-icon">üì±</div>
                                <div class="device-info">
                                    <div class="device-name" id="deviceName">Êú™ÈÄâÊã©ËÆæÂ§á</div>
                                    <div class="device-status" id="deviceStatus">ËØ∑Êâ´ÊèèÂπ∂ËøûÊé•ËÆæÂ§á</div>
                                </div>
                            </div>

                            <!-- ËÆæÂ§áËØ¶ÁªÜ‰ø°ÊÅØ (ËøûÊé•ÂêéÊòæÁ§∫) -->
                            <div class="device-details hidden" id="deviceDetails">
                                <div class="detail-row">
                                    <span class="detail-label">ËΩ¶Âûã</span>
                                    <span class="detail-value" id="detailCarModel">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Á°¨‰ª∂</span>
                                    <span class="detail-value" id="detailHwVersion">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">ËΩØ‰ª∂</span>
                                    <span class="detail-value" id="detailSwVersion">-</span>
                                </div>
                            </div>
                            <button class="btn btn-outline btn-lg" id="btnDisconnect" style="display: none;">
                                <span class="btn-icon">‚èèÔ∏è</span>
                                Êñ≠ÂºÄËøûÊé•
                            </button>
                            <button class="btn btn-warning btn-lg mt-sm hidden" id="btnEnterFactory">
                                <span class="btn-icon">üîß</span>
                                Â∑•ÂéÇÊ®°Âºè
                            </button>
                        </div>
                    </div>

                    <!-- ÁÅØÂÖâËÆæÁΩÆÂç°Áâá -->
                    <div class="card card-glass">
                        <div class="card-header">
                            <div class="card-icon">üí°</div>
                            <h2>ÁÅØÂÖâËÆæÁΩÆ</h2>
                        </div>
                        <div class="card-body">
                            <!-- ‰∫ÆÂ∫¶Ê®°ÂºèÂàáÊç¢ -->
                            <!-- ‰∫ÆÂ∫¶Ê®°ÂºèÂàáÊç¢ (Switch Card Style) -->
                            <div class="switch-card">
                                <span class="switch-card-label" id="zoneModeLabel">Âå∫Âüü‰∫ÆÂ∫¶</span>
                                <label class="switch">
                                    <input type="checkbox" id="zoneMode">
                                    <span class="switch-slider"></span>
                                </label>
                            </div>

                            <!-- Áªü‰∏Ä‰∫ÆÂ∫¶ -->
                            <div class="zone-controls" id="unifiedZone">
                                <div class="slider-container">
                                    <span class="slider-label">ÊÄª‰∫ÆÂ∫¶</span>
                                    <input type="range" id="brightnessTotal" min="0" max="10" value="5">
                                    <span class="slider-value" id="brightnessTotalValue">5</span>
                                </div>
                            </div>

                            <!-- Âå∫Âüü‰∫ÆÂ∫¶ -->
                            <div class="zone-controls hidden" id="zoneControls">
                                <div class="zone-item">
                                    <div class="zone-header">
                                        <span class="zone-name">Âå∫Âüü‰∏Ä</span>
                                        <span class="zone-value" id="zone1Value">5</span>
                                    </div>
                                    <input type="range" id="brightnessZone1" min="0" max="10" value="5">
                                </div>
                                <div class="zone-item">
                                    <div class="zone-header">
                                        <span class="zone-name">Âå∫Âüü‰∫å</span>
                                        <span class="zone-value" id="zone2Value">5</span>
                                    </div>
                                    <input type="range" id="brightnessZone2" min="0" max="10" value="5">
                                </div>
                                <div class="zone-item">
                                    <div class="zone-header">
                                        <span class="zone-name">Âå∫Âüü‰∏â</span>
                                        <span class="zone-value" id="zone3Value">5</span>
                                    </div>
                                    <input type="range" id="brightnessZone3" min="0" max="10" value="5">
                                </div>
                            </div>

                            <!-- ÂºÄÂÖ≥ÊéßÂà∂ -->
                            <div class="section-title mt-lg">ÂºÄÂÖ≥ÊéßÂà∂</div>
                            <div class="switch-group" id="switchControl">
                                <button class="switch-option" data-switch="0">ÂÖ≥Èó≠</button>
                                <button class="switch-option active" data-switch="1">ÊâìÂºÄ</button>
                                <button class="switch-option" data-switch="2">Ë∑üÈöèËΩ¶ÁÅØ</button>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
                <div class="ambient-content">
                    <!-- ÂçïËâ≤Ê®°ÂºèÈù¢Êùø -->
                    <div class="card card-glass" id="singleColorPanel">
                        <div class="card-header">
                            <div class="card-icon">üé®</div>
                            <h2>RGB È¢úËâ≤ÊéßÂà∂</h2>
                        </div>
                        <div class="card-body">
                            <!-- È¢úËâ≤ÈÄâÊã©Âô® -->
                            <div class="section-title">È¢úËâ≤ÈÄâÊã©</div>
                            <div class="color-picker-wrapper">
                                <canvas id="colorPickerCanvas" class="color-picker-canvas"></canvas>
                                <div class="color-picker-indicator" id="colorIndicator"></div>
                            </div>
                            <div class="color-preview">
                                <div class="color-preview-swatch" id="colorPreview"></div>
                                <div class="color-preview-info">
                                    <div class="label">ÂΩìÂâçÈ¢úËâ≤</div>
                                    <div class="value" id="colorHexValue">#FF0000</div>
                                </div>
                                <button class="btn btn-primary" id="btnApplyColor">
                                    Â∫îÁî®È¢úËâ≤
                                </button>
                            </div>

                            <!-- È¢ÑËÆæÈ¢úËâ≤ -->
                            <div class="preset-colors-header mt-lg">
                                <span class="title">Â∏∏Áî®È¢úËâ≤</span>
                                <div class="actions">
                                    <button class="action-btn" id="btnAddColor">+ Ê∑ªÂä†</button>
                                    <button class="action-btn" id="btnEditColors">ÁºñËæë</button>
                                </div>
                            </div>
                            <div class="color-grid" id="presetColors">
                                <!-- È¢ÑËÆæÈ¢úËâ≤Â∞ÜÁî± JS Âä®ÊÄÅÁîüÊàê -->
                            </div>
                        </div>
                    </div>

                    <!-- Â§öËâ≤Ê®°ÂºèÈù¢Êùø (ÈªòËÆ§ÈöêËóè) -->
                    <div class="card card-glass hidden" id="multiColorPanel">
                        <div class="card-header">
                            <div class="card-icon">üåà</div>
                            <h2>Â§öËâ≤ RGB ÊéßÂà∂</h2>
                        </div>
                        <div class="card-body">
                            <!-- Ê®°ÂºèÂàáÊç¢ -->
                            <!-- Ê®°ÂºèÂàáÊç¢ (Switch Card Style) -->
                            <div class="switch-card">
                                <span class="switch-card-label" id="dynamicModeLabel">Âä®ÊÄÅÊ®°Âºè</span>
                                <label class="switch">
                                    <input type="checkbox" id="dynamicToggle">
                                    <span class="switch-slider"></span>
                                </label>
                            </div>

                            <!-- È¢ÑËÆæÂ§öËâ≤ÊñπÊ°à -->
                            <div class="section-title mt-lg">È¢ÑËÆæÊñπÊ°à</div>
                            <div class="color-grid" id="multiPresets">
                                <!-- Â§öËâ≤È¢ÑËÆæÂ∞ÜÁî± JS Âä®ÊÄÅÁîüÊàê -->
                            </div>

                            <!-- ÈÄöÈÅìÈ¢úËâ≤ÊéßÂà∂ (‰ªÖËá™ÂÆö‰πâÊ®°ÂºèÂèØËßÅ) -->
                            <div id="customChannelControls" class="hidden">
                                <div class="section-title mt-lg">ÈÄöÈÅìÈ¢úËâ≤</div>

                                <!-- ÂêåÊ≠•Ê®°ÂºèÂàáÊç¢ (Switch Card Style) -->
                                <div class="switch-card mb-md">
                                    <span class="switch-card-label" id="syncModeLabel">ÂêåÊ≠•Ê®°Âºè</span>
                                    <label class="switch">
                                        <input type="checkbox" id="syncToggle" checked>
                                        <span class="switch-slider"></span>
                                    </label>
                                </div>

                                <!-- ÂêåÊ≠•Ê®°Âºè: ÊâÄÊúâÈÄöÈÅì -->
                                <div id="syncChannels">
                                    <div class="channel-section">
                                        <div class="channel-header">
                                            <span class="channel-name">ÈÄöÈÅì 1„ÄÅ2„ÄÅ3 È¢úËâ≤</span>
                                        </div>
                                        <div class="channel-colors" id="channelAllColors">
                                            <!-- È¢úËâ≤Â∞ÜÁî± JS Âä®ÊÄÅÁîüÊàê -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Áã¨Á´ãÊ®°Âºè: ÂàÜÂºÄÈÄöÈÅì -->
                                <div id="separateChannels" class="hidden">
                                    <div class="channel-section mb-md">
                                        <div class="channel-header">
                                            <span class="channel-name">ÈÄöÈÅì‰∏ÄÈ¢úËâ≤</span>
                                        </div>
                                        <div class="channel-colors" id="channel1Colors"></div>
                                    </div>
                                    <div class="channel-section mb-md">
                                        <div class="channel-header">
                                            <span class="channel-name">ÈÄöÈÅì‰∫åÈ¢úËâ≤</span>
                                        </div>
                                        <div class="channel-colors" id="channel2Colors"></div>
                                    </div>
                                    <div class="channel-section">
                                        <div class="channel-header">
                                            <span class="channel-name">ÈÄöÈÅì‰∏âÈ¢úËâ≤</span>
                                        </div>
                                        <div class="channel-colors" id="channel3Colors"></div>
                                    </div>
                                </div>

                                <!-- Êìç‰ΩúÊåâÈíÆ -->
                                <div class="flex gap-md mt-lg" style="justify-content: center;">
                                    <button class="btn btn-outline" id="btnClearMulti">Ê∏ÖÈô§È¢úËâ≤</button>
                                    <button class="btn btn-primary" id="btnApplyMulti">Â∫îÁî®</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÂæãÂä®Ê®°ÂºèÈù¢Êùø (ÈªòËÆ§ÈöêËóè) -->
                    <div class="card card-glass hidden" id="dynamicPanel">
                        <div class="card-header">
                            <div class="card-icon">üéµ</div>
                            <h2>ÂæãÂä®Ê®°Âºè</h2>
                        </div>
                        <div class="card-body">
                            <!-- ÂæãÂä®È¢ÑËÆæ -->
                            <div class="section-title">ÂæãÂä®ÊïàÊûú</div>
                            <div class="color-grid" id="dynamicPresets"
                                style="grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));">
                                <!-- ÂæãÂä®È¢ÑËÆæÂ∞ÜÁî± JS Âä®ÊÄÅÁîüÊàê -->
                            </div>
                        </div>
                    </div>

                    <!-- Â∑•ÂéÇÊ®°ÂºèÈù¢Êùø (ÈªòËÆ§ÈöêËóè) -->
                    <div class="card card-glass hidden" id="factoryPanel">
                        <div class="card-header">
                            <div class="card-icon">üîß</div>
                            <h2>Â∑•ÂéÇÊ®°Âºè</h2>
                            <button class="btn btn-sm btn-outline" id="btnExitFactory" style="margin-left: auto;">
                                ÈÄÄÂá∫
                            </button>
                        </div>
                        <div class="card-body">
                            <!-- VIN Ê≥®ÂÜå -->
                            <div class="factory-section">
                                <div class="section-title">üìã ËÆæÂ§áÊ≥®ÂÜå</div>
                                <div class="factory-input-group">
                                    <label>VIN Á†Å (17‰Ωç)</label>
                                    <div class="input-with-btn">
                                        <input type="text" id="factoryVIN" maxlength="17" placeholder="ËæìÂÖ•ËΩ¶ËæÜVINÁ†Å">
                                        <button class="btn btn-sm btn-primary" id="btnRegisterVIN">Ê≥®ÂÜå</button>
                                    </div>
                                </div>
                                <div class="factory-row mt-md">
                                    <div class="factory-input-group">
                                        <label>ËΩ¶ÂûãÁºñÂè∑</label>
                                        <div class="input-with-btn">
                                            <input type="number" id="factoryCarCode" min="0" max="255"
                                                placeholder="0-255">
                                            <button class="btn btn-sm btn-primary" id="btnSetCarCode">ËÆæÁΩÆ</button>
                                        </div>
                                    </div>
                                    <div class="factory-input-group">
                                        <label>ÂäüËÉΩÁºñÂè∑</label>
                                        <div class="input-with-btn">
                                            <input type="number" id="factoryFuncCode" min="0" max="255"
                                                placeholder="0-255">
                                            <button class="btn btn-sm btn-primary" id="btnSetFuncCode">ËÆæÁΩÆ</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- LED ÁÅØÂ∏¶ÈÖçÁΩÆ -->
                            <div class="factory-section mt-lg">
                                <div class="section-title">üí° ÁÅØÂ∏¶ÂÆâË£ÖÈÖçÁΩÆ</div>
                                <div class="led-config-grid" id="ledConfigGrid">
                                    <!-- JS Âä®ÊÄÅÁîüÊàê 6 ‰∏™Âå∫ÂüüÈÖçÁΩÆ -->
                                </div>
                            </div>

                            <!-- Èü≥Ê∫êÈÄâÊã© -->
                            <div class="factory-section mt-lg">
                                <div class="section-title">üéµ ÂæãÂä®Èü≥Ê∫ê</div>
                                <div class="radio-group">
                                    <label class="radio-card">
                                        <input type="radio" name="soundSource" value="mic" checked>
                                        <span class="radio-label">ÂÜÖÁΩÆÈ∫¶ÂÖãÈ£é</span>
                                    </label>
                                    <label class="radio-card">
                                        <input type="radio" name="soundSource" value="speaker">
                                        <span class="radio-label">ÂéüËΩ¶ÂñáÂè≠</span>
                                    </label>
                                </div>
                            </div>

                            <!-- ÁÅµÊïèÂ∫¶ -->
                            <div class="factory-section mt-lg">
                                <div class="section-title">üìä ÂæãÂä®ÁÅµÊïèÂ∫¶</div>
                                <div class="sensitivity-levels" id="sensitivityLevels">
                                    <button class="level-btn" data-level="1">1Ê°£</button>
                                    <button class="level-btn active" data-level="2">2Ê°£</button>
                                    <button class="level-btn" data-level="3">3Ê°£</button>
                                    <button class="level-btn" data-level="4">4Ê°£</button>
                                    <button class="level-btn" data-level="5">5Ê°£</button>
                                </div>
                            </div>

                            <!-- È´òÁ∫ßÂäüËÉΩ -->
                            <div class="factory-section mt-lg">
                                <div class="section-title">‚öôÔ∏è È´òÁ∫ßÂäüËÉΩ</div>
                                <div class="advanced-toggles">
                                    <div class="switch-card">
                                        <span class="switch-card-label">ËøéÂÆæÁÅØ</span>
                                        <label class="switch">
                                            <input type="checkbox" id="featureWelcome">
                                            <span class="switch-slider"></span>
                                        </label>
                                    </div>
                                    <div class="switch-card">
                                        <span class="switch-card-label">ËΩ¶Èó®ËÅîÂä®</span>
                                        <label class="switch">
                                            <input type="checkbox" id="featureDoor">
                                            <span class="switch-slider"></span>
                                        </label>
                                    </div>
                                    <div class="switch-card">
                                        <span class="switch-card-label">ËΩ¶ÈÄüÂìçÂ∫î</span>
                                        <label class="switch">
                                            <input type="checkbox" id="featureSpeed">
                                            <span class="switch-slider"></span>
                                        </label>
                                    </div>
                                    <div class="switch-card">
                                        <span class="switch-card-label">ËΩ¨ÂêëËÅîÂä®</span>
                                        <label class="switch">
                                            <input type="checkbox" id="featureTurn">
                                            <span class="switch-slider"></span>
                                        </label>
                                    </div>
                                    <div class="switch-card">
                                        <span class="switch-card-label">Á©∫Ë∞ÉËÅîÂä®</span>
                                        <label class="switch">
                                            <input type="checkbox" id="featureAC">
                                            <span class="switch-slider"></span>
                                        </label>
                                    </div>
                                    <div class="switch-card">
                                        <span class="switch-card-label">Á¢∞ÊíûË≠¶Á§∫</span>
                                        <label class="switch">
                                            <input type="checkbox" id="featureCrash">
                                            <span class="switch-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Âç±Èô©Êìç‰Ωú -->
                            <div class="factory-section mt-lg danger-zone">
                                <div class="section-title">‚ö†Ô∏è Âç±Èô©Êìç‰Ωú</div>
                                <button class="btn btn-danger btn-lg" id="btnFactoryReset">
                                    üîÑ ÊÅ¢Â§çÂá∫ÂéÇËÆæÁΩÆ
                                </button>
                            </div>

                            <!-- ËøúÁ®ãÊéßÂà∂ -->
                            <div class="factory-section mt-lg">
                                <div class="section-title">üì° ËøúÁ®ãÊéßÂà∂ (CAN/LIN)</div>

                                <!-- Ê®°ÂºèÈÄâÊã© -->
                                <div class="remote-control-header">
                                    <div class="radio-group">
                                        <label class="radio-card">
                                            <input type="radio" name="remoteMode" value="CAN" checked>
                                            <span class="radio-label">CAN</span>
                                        </label>
                                        <label class="radio-card">
                                            <input type="radio" name="remoteMode" value="LIN">
                                            <span class="radio-label">LIN</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- ËæìÂÖ•ÂíåÊéßÂà∂ -->
                                <div class="remote-control-input mt-md">
                                    <input type="text" id="remoteIdInput" placeholder="ËæìÂÖ• CAN ID (Â¶Ç: 100 Êàñ 100,200)">
                                    <button class="btn btn-primary" id="btnRemoteStart">
                                        <span class="btn-icon">‚ñ∂Ô∏è</span>
                                        ÂºÄÂßã
                                    </button>
                                </div>

                                <!-- Êï∞ÊçÆÊìç‰ΩúÊåâÈíÆ -->
                                <div class="remote-control-actions mt-sm">
                                    <button class="btn btn-sm btn-outline" id="btnRemoteClear">Ê∏ÖÁ©∫Êï∞ÊçÆ</button>
                                    <button class="btn btn-sm btn-outline" id="btnRemoteSave">‰øùÂ≠òÊï∞ÊçÆ</button>
                                    <span class="remote-status" id="remoteStatus">Êú™ËøêË°å</span>
                                </div>

                                <!-- Êï∞ÊçÆÊòæÁ§∫Âå∫ -->
                                <div class="remote-data-log" id="remoteDataLog">
                                    <div class="log-placeholder">ÁõëÊéßÊï∞ÊçÆÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Â∫ïÈÉ®ÂØºËà™ -->
        <nav class="ambient-footer">
            <a href="index.html" class="btn btn-outline">
                <span class="btn-icon">‚¨ÜÔ∏è</span>
                OTA ÂçáÁ∫ß
            </a>
            <button class="btn btn-outline" id="btnFactory">
                <span class="btn-icon">üè≠</span>
                Â∑•ÂéÇÊ®°Âºè
            </button>
        </nav>
    </div>

    <!-- ËÆæÂ§á‰ø°ÊÅØÂºπÁ™óÂ∑≤ÁßªÈô§ -->

    <!-- JavaScript Ê®°Âùó -->
    <script type="module" src="js/AmbientLightApp.js?v=13"></script>
</body>

</html>