# Web BLE Ambient & OTA

<div align="center">

**è½¦è½½æ°›å›´ç¯æ§åˆ¶ä¸å›ºä»¶å‡çº§ Web åº”ç”¨** - åŸºäº Web Bluetooth API

[![GitHub Pages](https://img.shields.io/badge/Demo-GitHub%20Pages-blue)](https://a757675586.github.io/WebOTA/)

</div>

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸŒˆ æ°›å›´ç¯æ§åˆ¶
- **è‰²å½©è°ƒèŠ‚** - RGB å…¨è‰²åŸŸé€‰æ‹©ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆå’Œæ‹–æ‹½è°ƒèŠ‚
- **æ¨¡å¼åˆ‡æ¢** - æ”¯æŒ **å•è‰²**ã€**å¤šè‰²** (å¹»å½©)ã€**å¾‹åŠ¨** (éŸ³ä¹è·Ÿéš) ä¸‰å¤§æ¨¡å¼
- **åŒºåŸŸæ§åˆ¶** - 6ä¸ªç‹¬ç«‹åŒºåŸŸ (ä¸»é©¾/å‰¯é©¾/å››é—¨) çš„ç¯ç æ•°é‡å’Œæ–¹å‘ç‹¬ç«‹é…ç½®
- **é¢„è®¾ä¸»é¢˜** - å†…ç½®å¤šç§ç»å…¸ä¸»é¢˜ (æ¹–æ»¨æ™´é›¨, è¥¿å±±æ™´é›ªç­‰) å’Œå¾‹åŠ¨æ¨¡å¼
- **å‚æ•°å¾®è°ƒ** - äº®åº¦ (å…¨å±€/åˆ†åŒº)ã€é€Ÿåº¦ã€çµæ•åº¦è°ƒèŠ‚
- **åŒå‘åŒæ­¥** - å®æ—¶åŒæ­¥è®¾å¤‡ç«¯çš„å¼€å…³çŠ¶æ€ã€äº®åº¦ã€é¢œè‰²å’Œæ¨¡å¼

### ğŸš€ OTA å›ºä»¶å‡çº§
- **å›ºä»¶åˆ·å†™** - æ”¯æŒ `bin` æ–‡ä»¶æœ¬åœ°ä¸Šä¼ ä¸åˆ·å†™
- **æ™ºèƒ½åˆ†å¸§** - è‡ªåŠ¨å¤„ç† MTU å’Œæ•°æ®åˆ†åŒ…
- **è¿›åº¦ç›‘æ§** - å®æ—¶æ˜¾ç¤ºä¼ è¾“é€Ÿåº¦ã€å‰©ä½™æ—¶é—´ä¸ç™¾åˆ†æ¯”
- **æ–­ç‚¹ç»­ä¼ ** - æ™ºèƒ½é”™è¯¯é‡è¯•æœºåˆ¶

### ğŸ› ï¸ å·¥å‚æ¨¡å¼
- **å‚æ•°é…ç½®** - VIN ç ã€è½¦å‹ä»£ç ã€åŠŸèƒ½ç¼–å·è®¾ç½®
- **ç¯ç æ ¡å‡†** - å¯è§†åŒ–é…ç½® LED ç¯ç æ•°é‡ä¸æµå‘ï¼Œ**æ”¯æŒé”®ç›˜ç›´æ¥è¾“å…¥æ•°å€¼**
- **åè®®è°ƒè¯•** - å®Œæ•´çš„æŒ‡ä»¤æ—¥å¿—è®°å½•ä¸å¯¼å‡ºåŠŸèƒ½

### ğŸ¨ ç°ä»£ UI è®¾è®¡
- **ç»ç’ƒæ€é£æ ¼** - é«˜çº§æ¯›ç»ç’ƒæ•ˆæœä¸æ¸å˜èƒŒæ™¯
- **å“åº”å¼å¸ƒå±€** - å®Œç¾é€‚é…æ¡Œé¢ä¸ç§»åŠ¨ç«¯ (iOS/Android)
- **ä¸“ä¸šå¯¼èˆª** - ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆªæ  (iOS HIG / Material Design 3 é£æ ¼)
- **æš—é»‘æ¨¡å¼** - æ·±è‰²ç³»ç•Œé¢ï¼ŒæŠ¤çœ¼ä¸”é«˜çº§

---

## ğŸŒ åœ¨çº¿è®¿é—®

éƒ¨ç½²å®Œæˆåè®¿é—®ï¼š

```
https://a757675586.github.io/WebOTA/
```

---

## ğŸ“± æµè§ˆå™¨æ”¯æŒ

| æµè§ˆå™¨ | æ¡Œé¢ç‰ˆ | ç§»åŠ¨ç«¯ | note |
|:------:|:------:|:------:|:-----|
| Chrome | âœ… | âœ… Android | æ¨è |
| Edge | âœ… | âœ… Android | æ¨è |
| Opera | âœ… | âœ… | |
| Safari | âŒ | âŒ iOS | Web BLE æš‚ä¸æ”¯æŒ iOS Safari (éœ€ç”¨ Bluefy ç­‰æµè§ˆå™¨) |
| Firefox | âŒ | âŒ | |

> âš ï¸ **é‡è¦**: Web Bluetooth éœ€è¦ **HTTPS** ç¯å¢ƒï¼Œæœ¬åœ°å¼€å‘éœ€ä½¿ç”¨ `localhost`

---

## ğŸ–¥ï¸ æœ¬åœ°è¿è¡Œ

### æ–¹æ³• 1: åŒå‡»ä¸€é”®å¯åŠ¨ (æ¨è)

```
åŒå‡» "å¯åŠ¨æœåŠ¡å™¨.bat"
```

### æ–¹æ³• 2: å‘½ä»¤è¡Œ

```bash
# Python
cd WebOTA
python -m http.server 8080

# æˆ– Node.js
npx serve -l 8080 .
```

ç„¶åæµè§ˆå™¨è®¿é—®: **http://localhost:8080**

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
WebOTA/
â”œâ”€â”€ index.html              # å…¥å£/OTA å‡çº§é¡µ
â”œâ”€â”€ ambient-light.html      # æ°›å›´ç¯æ§åˆ¶ä¸»é¡µ
â”œâ”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ å¯åŠ¨æœåŠ¡å™¨.bat           # ä¸€é”®å¯åŠ¨è„šæœ¬
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ style.css           # é€šç”¨ä¸ OTA æ ·å¼
â”‚   â”œâ”€â”€ ambient.css         # æ°›å›´ç¯ä¸“ç”¨æ ·å¼ (ç»ç’ƒæ€/ç»„ä»¶)
â”‚   â””â”€â”€ components.css      # åŸºç¡€ç»„ä»¶ (æŒ‰é’®/å¼€å…³/å¡ç‰‡)
â””â”€â”€ js/
    â”œâ”€â”€ AmbientLightApp.js  # æ°›å›´ç¯ä¸»åº”ç”¨é€»è¾‘
    â”œâ”€â”€ AmbientProtocol.js  # åè®®å®šä¹‰ä¸å°è£… (æŒ‡ä»¤é›†)
    â”œâ”€â”€ LightController.js  # ç¯å…‰çŠ¶æ€æ§åˆ¶å™¨
    â”œâ”€â”€ ColorPicker.js      # HSL é¢œè‰²é€‰æ‹©å™¨ç»„ä»¶
    â”œâ”€â”€ BleService.js       # BLE è¿æ¥æ ¸å¿ƒæœåŠ¡
    â”œâ”€â”€ OtaService.js       # OTA å‡çº§æ ¸å¿ƒæœåŠ¡
    â”œâ”€â”€ Protocol.js         # OTA åè®®è§£æ
    â””â”€â”€ Utils.js            # å·¥å…·å‡½æ•°
```

---

## ğŸ”§ åè®®å‚è€ƒ

### æœåŠ¡ UUID
- **ä¸»æœåŠ¡**: `0000ffe0-0000-1000-8000-00805f9b34fb`
- **å†™å…¥ç‰¹å¾**: `0000ff03-0000-1000-8000-00805f9b34fb` (Write Without Response)
- **é€šçŸ¥ç‰¹å¾**: `0000ffe1-0000-1000-8000-00805f9b34fb` (Notify)

### æ ¸å¿ƒæŒ‡ä»¤é›†

| åŠŸèƒ½ | æŒ‡ä»¤å¤´ | ç¤ºä¾‹ |
|------|--------|------|
| **å•è‰²æ§åˆ¶** | `0x16 0x01` | `16 01 R G B 00` |
| **äº®åº¦è°ƒèŠ‚** | `0x16 0x02` | `16 02 Zone Value` |
| **æ¨¡å¼åˆ‡æ¢** | `0x16 0x03` | `16 03 Mode 00 00` |
| **å¾‹åŠ¨æ¨¡å¼** | `0x16 0x05` | `16 05 Mode Color` |
| **LEDé…ç½®** | `0x16 0x18` | `16 18 Zone Count Direction` |
| **OTAå‡çº§** | `0xD8` | `D8 ...` |

> æ›´å¤šåè®®ç»†èŠ‚è¯·æŸ¥é˜… `js/AmbientProtocol.js`

---

## ğŸ“ License

MIT License
